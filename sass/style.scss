/* Font */
@import url('https://fonts.googleapis.com/css2?family=Inter&display=swap');
@import 'callouts';

$spacing: 1.5rem;

/* Focus behaviour */
/*:is(a, button, input, textarea, summary, code) {*/
:is(a, input, textarea, summary, code) {
  --outline-size: max(2px, 0.08em);
  --outline-style: solid;
  --outline-color: var(--color-primary);
  --outline-offset: 3px;
}
:is(a, input, textarea, summary, code):focus {
  outline: var(--outline-size) var(--outline-style) var(--outline-color);
  outline-offset: var(--outline-offset, var(--outline-size));
}
:is(a, input, textarea, summary, code):focus-visible {
  outline: var(--outline-size) var(--outline-style) var(--outline-color);
  outline-offset: var(--outline-offset, var(--outline-size));
}
:is(a, input, textarea, summary, code):focus:not(:focus-visible) {
  outline: none;
}
:is(a, input, textarea, summary, code):hover {
  outline: var(--outline-size) var(--outline-style) var(--outline-color);
  outline-offset: var(--outline-offset, var(--outline-size));
}

/* Settings */
:root {
  /* @link https://utopia.fyi/type/calculator?c=320,16,1.2,1240,18,1.25,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */
  --size-step--2: clamp(0.6944rem, 0.6856rem + 0.0444vi, 0.72rem);
  --size-step--1: clamp(0.8333rem, 0.8101rem + 0.1159vi, 0.9rem);
  --size-step-0: clamp(1rem, 0.9565rem + 0.2174vi, 1.125rem);
  --size-step-1: clamp(1.2rem, 1.1283rem + 0.3587vi, 1.4063rem);
  --size-step-2: clamp(1.44rem, 1.3295rem + 0.5527vi, 1.7578rem);
  --size-step-3: clamp(1.728rem, 1.5648rem + 0.8161vi, 2.1973rem);
  --size-step-4: clamp(2.0736rem, 1.8395rem + 1.1704vi, 2.7466rem);
  --size-step-5: clamp(2.4883rem, 2.1597rem + 1.6433vi, 3.4332rem);

  --color-accent: salmon;
  --color-background: #fff;
  --color-code-background: #ddd;
  --color-code: #000;
  --color-dark-alt: #222;
  --color-dark: #1a1a1a;
  --color-heading: #222;
  --color-light-alt: #f2f2f2;
  --color-light: #fafafa;
  --color-link: #3273dc;
  --color-primary: #1a8fe3;
  --color-text: #444;

  --font-main: Verdana, sans-serif;
  --font-stack: Inter, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI';
  --page-width: 80ch;
  --spacing: 1.5rem;
  --visited-color: #8b6fcb;
}

/* Dark mode */
@media (prefers-color-scheme: dark) {
  :root {
    --color-dark: #fafafa;
    --color-light: #1a1a1a;
    --color-background: #2f2f2f;
    --color-code-background: #000;
    --color-code: #ddd;
    --color-heading: #eee;
    --color-link: #8cc2dd;
    --color-text: #ddd;
  }
}

/* Core Styles */
* {
  box-sizing: border-box;
}
body {
  background: var(--color-light);
  color: var(--color-dark);
  padding: $spacing clamp(calc($spacing / 2), 5vw, calc($spacing * 3));
  font-family: var(--font-stack);
  font-size: var(--size-step-0);
  line-height: 1.5;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  margin: 0;
}
main {
  flex: 1;
}
header {
  padding-bottom: $spacing;
  margin-bottom: $spacing;
}
header,
main,
footer {
  width: 100%;
}
a {
  color: var(--color-dark);
  display: inline-block;
}
a:hover {
  text-decoration: none;
  color: var(--color-primary);
}
img {
  display: block;
  max-width: 100%;
  height: auto;
  border: 2px solid var(--color-dark);
  border-radius: 3px;
}
img:hover {
  border-color: var(--color-primary);
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-weight: 100;
  line-height: 1.5;
  text-wrap: balance;
}
h1 {
  font-size: var(--size-step-5);
  margin-block-start: 0;
}
h2 {
  font-size: var(--size-step-3);
}
h3 {
  font-size: var(--size-step-2);
}
h4 {
  font-size: var(--size-step-1);
}
h5 {
  font-size: var(--size-step-0);
}
h6 {
  font-size: var(--size-step--1);
}
ul,
ol {
  -webkit-padding-start: $spacing;
  padding-inline-start: $spacing;
}
li {
  padding-block-start: cal($spacing * 0.5);
}
blockquote {
  -webkit-padding-start: $spacing;
  padding-inline-start: $spacing;
  -webkit-border-start: 0.3em solid;
  border-inline-start: 0.3em solid;
  font-style: italic;
  font-size: var(--size-step-1);
  margin-left: $spacing;
}
/* Utilities */
content > div > * {
  -webkit-margin-before: var(--flow-space, $spacing);
  margin-block-start: var(--flow-space, $spacing);
}
/* Flow and rhythm */
:is(h1, h2, h3, h4, h5, blockquote) {
  --flow-space: calc($spacing * 2);
  margin-block-end: calc($spacing / 2);
}
:is(h1, h2, h3, h4, h5) + * {
  --flow-space: calc($spacing / 3);
}
:is(h1, h2, h3, h4, h5) + :where(h2, h3, h4, h5) {
  --flow-space: calc($spacing);
}

main,
header,
footer {
  max-width: 65ch;
  margin-inline: auto;
}
blockquote {
  max-width: 50ch;
}

.title {
  text-decoration: none;
}
.title h1 {
  font-size: var(--size-step-1);
  margin-bottom: 0;
}
.title:hover {
  text-decoration: none;
  padding-inline: inherit;
}
nav p {
  display: block;
  font-size: var(--size-step-0);
}

ul.blog-posts {
  list-style-type: none;
  padding: unset;
}
ul.blog-posts li span {
  font-size: var(--size-step-0);
  min-width: 11ch;
  display: block;
  margin-block-start: $spacing;
}

/* Code */
.highlight,
.code {
  padding: $spacing 1px;
  background-color: var(--code-background-color);
  color: var(--code-color);
}
pre,
code {
  outline: 1px solid var(--color-text);
  background-color: var(--color-code-background);
}
code {
  padding-inline: 3px;
  text-wrap: pretty;
}
pre {
  border-radius: 5px;
  padding: calc($spacing / 2);
  overflow: auto;
}

/* Tables */
table {
  width: 100%;
  margin: calc($spacing) auto;
  border: 1px solid var(--color-text);
  border-collapse: collapse;
  font-size: var(--size-step-0);
}
table thead th,
table tfoot th {
  background: rgba(255, 255, 255, 0.1);
}
table th,
table td {
  padding: 2px 4px;
  border: 1px solid var(--color-text);
}

/* Journals Page */
.journals-page .blog-posts > li:first-child {
  margin-block-start: 0;
}
.journals-page .blog-posts > li {
  margin-block-start: 2rem;
}
.journals-page ul.blog-posts li span {
  display: none;
}
.journals-page ul.blog-posts li span + a {
  display: block;
  text-decoration: none;
  font-size: var(--size-step-2);
  /*border-bottom: 0.1rem solid var(--color-accent);*/
}
.journals-page ul.blog-posts li span + a:hover {
  background: inherit;
  padding-inline: initial;
  /*outline: none;*/
  display: inline-block;
}
#journal::after {
  display: flex;
  font-size: var(--size-step-0);
  font-weight: 400;
  margin-block-start: $spacing;
  outline: 2px solid orange;
  /*border-radius: 0.3rem;*/
  padding: 1rem;
  content: 'This page explores the concept of keeping a public journal, something I haven’t done before. I’m still defining what exactly I should include in this journal. I’m currently making sure it’s not too technical, or difficult to read.';
}
.journal-year {
  outline: 2px solid green;
  padding: 1rem;
  margin-block-start: 1rem;
  /*border-radius: 0.3rem;*/
}
.journal-year h2 {
  margin-block-start: 0;
  font-size: var(--size-step-3);
}

/* Footer */
footer p {
  float: inline-end;
  text-align: right;
  margin: 0;
}
footer span + span {
  float: inline-start;
}

@media screen and (max-width: 600px) {
  footer p {
    display: block;
    text-align: center;
    float: none;
  }
  footer span + span {
    margin-block-start: calc($spacing / 2);
    display: block;
    text-align: center;
    float: none;
  }
}
/* Footnotes */
section.footnotes p {
  margin: calc($spacing / 8) 0;
}

/* 404 not found */
.not-found {
  overflow: hidden;
}

/* Progress Bar */
.not-found .progress__wrapper,
.subscribe .progress__wrapper,
.home .progress__wrapper,
body.not-found header {
  display: none;
}
.progress__wrapper {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 100;
  width: 100%;
  height: 0.65rem;
  background-color: #2c2c2c;
}
.progress__bar {
  filter: grayscale(0.5);
  display: block;
  width: 0;
  height: inherit;
  background: linear-gradient(90deg, #0000ff, #4b0082, #9400d3);
}

/* Internal / External Links */
a[href^="http://"]:not([href*="miguelpimentel.do"]):hover,
a[href^="https://"]:not([href*="miguelpimentel.do"]):hover
{
  color: var(--color-accent);
  outline-color: var(--color-accent);
}

/* Tabs */
.tablink,
.tablink2 {
  background-color: #555;
  color: white;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  font-size: var(--size-step-0);
  padding: 0.2rem 1rem;
}
.tabcontent,
.tabcontent2 {
  color: white;
  display: none;
}
p:has(+ .tabcontent),
p:has(+ .tabcontent2) {
  display: flex;
  margin: 0;
  padding: 0;
}
.tabcontent .highlight,
.tabcontent2 .highlight {
  padding: 0;
  margin: 0;
}

/* Shame */
.highlight pre {
  margin: 0 auto;
}
.post h1 {
  font-size: var(--size-step-4);
}
#buttons {
  display: flex;
}
:is(button):hover {
  background: var(--color-accent);
}
hr {
  border-color: var(--color-primary);
}
mark {
  padding-inline: 3px;
}
blockquote {
  border-color: var(--color-primary);
}
.title {
  text-decoration: none;
}
.title h1 {
  font-size: var(--size-step-1);
  margin-bottom: 0;
}
.title:hover {
  text-decoration: none;
  padding-inline: inherit;
}
